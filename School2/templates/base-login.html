<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="module" src="../static/node_modules/@ionic/core/dist/ionic/ionic.esm.js"></script>
  <script nomodule src="../static/node_modules/@ionic/core/dist/ionic/ionic.js"></script>
  <link rel="stylesheet" href="../static/node_modules/@ionic/core/css/ionic.bundle.css" />
  <script src="../static/node_modules/chart.js/dist/Chart.js"></script>
  <script src="../static/node_modules/chart.js/dist/Chart.min.js"></script>
  <link rel="stylesheet" href="../static/css/dark.css" />

  {% block head %}{% endblock %}
</head>

<body>

  <ion-app>
    <ion-menu side="start" content-id="main-content">
      <ion-header>
        <ion-toolbar translucent>
          <ion-title>
            <ion-button fill="clear" href="{{url_for('home')}}">School2</ion-button>
          </ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-item lines="full">
          <ion-icon slot="start" name="moon"></ion-icon>
          <ion-label>
            Toggle Dark Theme
          </ion-label>
          <ion-toggle id="themeToggle" slot="end"></ion-toggle>
        </ion-item>
        <ion-list>
          {% if role == 'student' %}
          <ion-item>
            <ion-avatar slot="start">
              <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
            </ion-avatar>
            <ion-button fill="clear" onclick="window.location.href='{{ url_for('get_details') }}';">
              {{session['user']['name']}}</ion-label>
          </ion-item>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('home') }}">Announcements</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Timetable</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('add_courses') }}">Courses</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('fee') }}">Fee Payment</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Resources</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Assignments</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Results</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('home') }}">Class Messages</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('get_details') }}">Update Details</ion-button>
          </ion-item>

          <ion-button expand="block" fill="clear" color="danger" href="{{ url_for('logout') }}">Logout</ion-button>

          {% elif role == 'parent' %}
          <ion-item>
            <ion-avatar slot="start">
              <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
            </ion-avatar>
            <ion-button fill="clear" onclick="window.location.href='{{ url_for('get_details') }}';">
              {{session['user']['name']}}</ion-label>
          </ion-item>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('home') }}">Announcements</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Attendance</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Marks</ion-button>
          </ion-item>

          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Fee Recipts</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('get_details') }}">Update Details</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Complaints</ion-button>
          </ion-item>
          <ion-button expand="block" fill="clear" color="danger" href="{{ url_for('logout') }}">Logout</ion-button>

          {% elif role == 'staff' %}
          <ion-item>
            <ion-avatar slot="start">
              <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
            </ion-avatar>
            <ion-button fill="clear" onclick="window.location.href='{{ url_for('get_details') }}';">
              {{session['user']['name']}}</ion-label>
          </ion-item>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Timetable</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('add_courses') }}">Courses</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Attendance</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Assignments</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('construct') }}">Results</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{url_for('classmsg')}}">Class Messages
            </ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('get_details') }}">Update Details</ion-button>
          </ion-item>

          <ion-button expand="block" fill="clear" color="danger" href="{{ url_for('logout') }}">Logout</ion-button>
          {% elif role == 'admin' %}
          <ion-item>
            <ion-avatar slot="start">
              <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
            </ion-avatar>
            <ion-button fill="clear" onclick="window.location.href='{{ url_for('get_details') }}';">
              {{session['user']['name']}}</ion-label>
          </ion-item>

          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('updates') }}">Announce</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('fee') }}">Set Fee</ion-button>
          </ion-item>

          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('add_courses') }}">Courses</ion-button>
          </ion-item>

          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('adduser') }}">Add Users</ion-button>
          </ion-item>

          <ion-item>
            <ion-button expand="block" fill="clear" href="{{ url_for('get_details') }}">Update Details</ion-button>
          </ion-item>

          <ion-button expand="block" fill="clear" color="danger" href="{{ url_for('logout') }}">Logout</ion-button>
          {% endif %}
        </ion-list>
      </ion-content>
    </ion-menu>

    <div class="ion-page" id="main-content">
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
          </ion-buttons>
          <ion-title>School2</ion-title>
        </ion-toolbar>
      </ion-header>
      {% block body %}
      {% endblock %}
    </div>
  </ion-app>
  <script>
    // Query for the toggle that is used to change between themes
    const toggle = document.querySelector('#themeToggle');

    // Listen for the toggle check/uncheck to toggle the dark class on the <body>
    toggle.addEventListener('ionChange', (ev) => {
      document.body.classList.toggle('dark', ev.detail.checked);
    });

    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

    // Listen for changes to the prefers-color-scheme media query
    prefersDark.addListener((e) => checkToggle(e.matches));

    // Called when the app loads
    function loadApp() {
      checkToggle(prefersDark.matches);
    }

    // Called by the media query to check/uncheck the toggle
    function checkToggle(shouldCheck) {
      toggle.checked = shouldCheck;
    }
  </script>
</body>

</html>